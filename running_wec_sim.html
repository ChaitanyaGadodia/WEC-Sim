

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Running WEC-Sim &mdash; WEC-Sim 1.1a0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="WEC-Sim 1.1a0 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> WEC-Sim</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="release_notes.html#wec-sim-1-1">WEC-Sim-1.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#matlab-requirements">MATLAB Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#downloading-and-installing-bemio">Downloading and Installing <cite>bemio</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#downloading-wec-sim">Downloading <cite>WEC-Sim</cite></a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#installing-wec-sim">Installing WEC-Sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started.html#running-wec-sim">Running <cite>WEC-Sim</cite></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#code-conventions">Code Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#input-file-structure">Input File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#input-parameters">Input Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#library-structure">Library Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="applications.html#rm3-two-body-point-absorber">RM3 Two-Body Point Absorber</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications.html#oscillating-surge-pitch-device">Oscillating Surge-Pitch Device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trouble_shooting.html">Trouble Shooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trouble_shooting.html#tips">Tips</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="theory.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#boundary-element-method">Boundary Element Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#coordinate-system-in-wec-sim">Coordinate System in WEC-Sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#time-domain-numerical-method">Time-Domain Numerical Method</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#power-take-off-forces">Power Take-off Forces</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#mooring-forces">Mooring Forces</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#viscous-drag">Viscous Drag</a></li>
<li class="toctree-l2"><a class="reference internal" href="theory.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">Publications and References</a><ul>
<li class="toctree-l2"><a class="reference internal" href="references.html#publications">Publications</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#wec-sim-in-the-news">WEC-Sim in the News</a></li>
<li class="toctree-l2"><a class="reference internal" href="references.html#references">References</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">WEC-Sim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Running <cite>WEC-Sim</cite></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/running_wec_sim.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="running-wec-sim">
<h1>Running <cite>WEC-Sim</cite><a class="headerlink" href="#running-wec-sim" title="Permalink to this headline">¶</a></h1>
<p>This section gives an overview of the <cite>WEC-Sim</cite> work flow. First we describe the <cite>WEC-Sim</cite> file structure describe the steps for setting up and running a <cite>WEC-Sim</cite> simulation. Detailed descriptions and options for input parameters for the input file are described in the <a href="#id1"><span class="problematic" id="id2">`Code Overview Section`_</span></a>. Specific examples of using <cite>WEC-Sim</cite> to simulate WEC devices are presented in the Application Section.</p>
<div class="section" id="file-structure-overview">
<h2>File Structure Overview<a class="headerlink" href="#file-structure-overview" title="Permalink to this headline">¶</a></h2>
<p>All the information for a WEC-Sim run is contained within a case directory. Provided you have installed WEC-Sim correctly, this folder can be anywhere on your computer. The table below shows the structure for a case directory.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="46%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Information</strong></td>
<td><strong>File name</strong></td>
<td><strong>Location</strong></td>
</tr>
<tr class="row-even"><td>Input file</td>
<td>wecSimInputFile.m</td>
<td>Case directory</td>
</tr>
<tr class="row-odd"><td>WEC Model</td>
<td><code class="docutils literal"><span class="pre">&lt;WEC</span> <span class="pre">Model</span> <span class="pre">Name&gt;.slx</span></code></td>
<td>Case directory</td>
</tr>
<tr class="row-even"><td>Hydrodynamic Data</td>
<td><code class="docutils literal"><span class="pre">&lt;hydro-data</span> <span class="pre">name&gt;.hd5</span></code></td>
<td>hydroData</td>
</tr>
<tr class="row-odd"><td>Geometry</td>
<td><code class="docutils literal"><span class="pre">&lt;STL</span> <span class="pre">File</span> <span class="pre">Name&gt;.stl</span></code></td>
<td>geometry</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The location of the <cite>WEC-Sim</cite> case directory will be referred to as the <code class="docutils literal"><span class="pre">$CASE</span></code> directory in this document.</p>
</div>
</div>
<div class="section" id="steps-to-run-wec-sim">
<h2>Steps To Run <cite>WEC-Sim</cite><a class="headerlink" href="#steps-to-run-wec-sim" title="Permalink to this headline">¶</a></h2>
<p>The <cite>WEC-Sim</cite> work flow is shown in the figure below. We describe the steps for setting up and running a <cite>WEC-Sim</cite> simulations in the following:</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/WECSimWorkflow.png"><img alt="_images/WECSimWorkflow.png" src="_images/WECSimWorkflow.png" style="width: 400pt;" /></a>
</div>
<div class="section" id="step-1-pre-processing">
<h3>Step 1: Pre-Processing<a class="headerlink" href="#step-1-pre-processing" title="Permalink to this headline">¶</a></h3>
<p>In the pre-processing step, users need to create the model geometry, calculate the hydrodynamic coefficients and convert the hydrodynamic coefficients into HDF5 format for <cite>WEC-Sim</cite> read:</p>
<ul class="simple">
<li>Creating the device geometry using a CAD model: Users need to create representations of the WEC bodies to generate mesh for their hydrodynamic model and also need to export a their CAD model in STL format, which are used to visualize the WEC bodies in the <cite>WEC-Sim</cite>/MATLAB graphical user interface.</li>
<li>Run the hydrodynamic model: <cite>WEC-Sim</cite> require pre-determined hydrodynamic coefficients. Typically, these hydrodynamic coefficients for each body of the WEC device are generated using a hydrodynamic model (e.g., WAMIT, NEMOH or AQWA).</li>
<li>Run <code class="docutils literal"><span class="pre">bemio</span></code> to create <cite>WEC-Sim</cite> input hydrodynamic data file in HDF5 format: <cite>WEC-Sim</cite> will read the hydrodynamic data generated using a hydrodynamic model in HDF5 format (<code class="docutils literal"><span class="pre">&lt;hydro-data</span> <span class="pre">name&gt;.hd5</span></code>). The boundary-element method input/output (<code class="docutils literal"><span class="pre">bemio</span></code>) was developed for this purpose. Currently, bemio accepts the hydrodynamic coefficients from WAMIT, NEMOH and AQWA.</li>
</ul>
<p>Note:
* To ensure that <cite>WEC-Sim</cite> uses the correct hydrodynamic coefficients to model the WEC system, the hydrodynamic coefficients MUST be given at the center of gravity for each body. If WAMIT is used, the center of gravity for each body MUST be at the origin of the body coordinate system (XBODY) in WAMIT simulations. More details on WAMIT setup are given in the WAMIT User Manual&lt;ref&gt;wamit&lt;/ref&gt;.
* Current version of <cite>WEC-Sim</cite> does not account for the multidirectional wave heading and <cite>WEC-Sim</cite> will use whatever (single) wave heading was modeled in the hydrodynamic model.
* Users are also allowed to specify their own hydrodynamic coefficients by modifying an existing HDF5 file or create their own HDF5 file with customized hydrodynamic coefficients following HDF5 format used in <code class="docutils literal"><span class="pre">bemio</span></code>.</p>
</div>
<div class="section" id="step-2-build-device-simulink-simmechanics-model">
<h3>Step 2: Build Device Simulink/SimMechanics Model<a class="headerlink" href="#step-2-build-device-simulink-simmechanics-model" title="Permalink to this headline">¶</a></h3>
<p>Next, the user must build the device model using the Simulink/SimMechanics toolboxes and the <cite>WEC-Sim</cite> Library. Figure below shows an example of a a two-body point absorber modeled in Simulink/SimMechanics.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/exampleWecModel.png"><img alt="_images/exampleWecModel.png" src="_images/exampleWecModel.png" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-3-create-wec-sim-input-file">
<h3>Step 3: Create <cite>WEC-Sim</cite> Input File<a class="headerlink" href="#step-3-create-wec-sim-input-file" title="Permalink to this headline">¶</a></h3>
<p>A <cite>WEC-Sim</cite> input file needs to be created in the case directory, and it MUST be named <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code>. An example of the input file for a two-body point absorber is shown in the following figure. In the input file, the simulation settings, sea state, body mass properties, PTO, and constraints are specified. In addition, users MUST specify the Simulink/SimMechanics model file name in the <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code>, which is:</p>
<div class="highlight-python"><div class="highlight"><pre>simu.simMechanicsFile=’&lt;WEC Model Name&gt;.slx’.
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/runWECSim_mod.png"><img alt="_images/runWECSim_mod.png" src="_images/runWECSim_mod.png" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-4-execute-wec-sim">
<h3>Step 4: Execute <cite>WEC-Sim</cite><a class="headerlink" href="#step-4-execute-wec-sim" title="Permalink to this headline">¶</a></h3>
<p>Finally, execute the simulation by running the wecSim command from the MATLAB Command Window. The wecSim command must be executed in the <cite>WEC-Sim</cite> case directory where the <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code> is located.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>WEC-Sim</cite> simulations should always be executed from the MATLAB Command Window and no from the Simulink/SimMechanics model. This ensures that the correct variables are in the MATLAB workspace during simulation.</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, National Renewable Energy Laboratory and Sandia Corporation.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1a0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>