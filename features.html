

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Advanced Features &mdash; WEC-Sim  documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="WEC-Sim  documentation" href="index.html"/>
        <link rel="next" title="Online Forum" href="online_forum.html"/>
        <link rel="prev" title="Tutorials" href="tutorials.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> WEC-Sim
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Advanced Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#visualization-using-paraview">Visualization Using Paraview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#getting-started-installation">Getting Started - Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-paraview-output">Setting Up Paraview Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="#outputs-and-opening-in-paraview">Outputs and Opening in Paraview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-visualization-manipulation">Basic Visualization Manipulation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualizing-non-linear-hydro-forces">Visualizing Non-Linear Hydro Forces</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pto-sim">PTO-Sim</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rm3-with-pto-sim">RM3 with PTO-Sim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with Hydraulic PTO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rm3-with-mechanical-pto">RM3 with Mechanical PTO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#oswec-with-pto-sim">OSWEC with PTO-Sim</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#oswec-with-hydraulic-pto">OSWEC with Hydraulic PTO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#other-pto-sim-tutorials">Other PTO-Sim Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#moordyn">MoorDyn</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="online_forum.html">Online Forum</a></li>
<li class="toctree-l1"><a class="reference internal" href="publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">WEC-Sim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Advanced Features</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/features.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="advanced-features">
<span id="features"></span><h1>Advanced Features<a class="headerlink" href="#advanced-features" title="Permalink to this headline">¶</a></h1>
<div class="section" id="visualization-using-paraview">
<span id="viz"></span><h2>Visualization Using Paraview<a class="headerlink" href="#visualization-using-paraview" title="Permalink to this headline">¶</a></h2>
<p>This section describes how to setup, output, and use Paraview files for visualizing a WEC-Sim simulation. This improves on SimMechanics&#8217;s explorer by:</p>
<ul class="simple">
<li>Visualization of the wave field</li>
<li>Visualization of the cell-by-cell non-linear hydrodynamic forces (when using non-linear hydro)</li>
<li>Allow data manipulation and more visualization options</li>
</ul>
<p>On the other hand the SimMechanics explorer shows the following information not shown in Paraview vizualition:</p>
<ul class="simple">
<li>Location of the center of gravity</li>
<li>Location of the different frames including PTO and Constraint frames</li>
</ul>
<p>Visualization with paraview requires many files to be written, which makes the WEC-Sim simulation take significantly more time, and makes the directory significantly larger. It should only be turned on when vizualisation is desired. The user also needs to have some familiarity with using Paraview.</p>
<div class="section" id="getting-started-installation">
<h3>Getting Started - Installation<a class="headerlink" href="#getting-started-installation" title="Permalink to this headline">¶</a></h3>
<p>You will need to install <a class="reference external" href="http://www.paraview.org/">Paraview</a> and install and setup Python.
Next you will need to add some WEC-Sim specific macros,as follows:</p>
<ul class="simple">
<li>Open Paraview</li>
<li>Click on <code class="docutils literal"><span class="pre">Macros</span> <span class="pre">=&gt;</span> <span class="pre">Add</span> <span class="pre">new</span> <span class="pre">macro</span></code></li>
<li>Navigate to the WEC-Sim <code class="docutils literal"><span class="pre">source/functions/paraview_macros</span></code> directory</li>
<li>Select the first file and click <code class="docutils literal"><span class="pre">OK</span></code></li>
<li>Repeat this for all files in the <code class="docutils literal"><span class="pre">paraview_macros</span> <span class="pre">directory.</span></code></li>
</ul>
</div>
<div class="section" id="setting-up-paraview-output">
<h3>Setting Up Paraview Output<a class="headerlink" href="#setting-up-paraview-output" title="Permalink to this headline">¶</a></h3>
<p>The following table shows the variables that can be specfied in the <code class="docutils literal"><span class="pre">wecSimInputFile</span></code> to control the Paraview visualization. The <code class="docutils literal"><span class="pre">body.viz</span></code> properties are also used in the SimMechanics explorer visualization.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">WEC-Sim Visualization using Paraview</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Variable</td>
<td>Description</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">simu.paraview</span></code></td>
<td>0 to not ouput Paraview files [default]
1 to output Paraview files</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">simu.nlHydro</span></code></td>
<td>0 for no non-linear hydro [default]
1 for non-linear hydro with mean free surface
2 for non-linear hydro with instantaneous fs</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">simu.domainSize</span></code></td>
<td>size of ground and water planes in meters [default 200]</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">simu.dtOut</span></code></td>
<td>simulation output sampling time step [default dt]</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">body(i).viz.color</span></code></td>
<td>[RGB] body color [default [1 1 0]]</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">body(i).viz.opacity</span></code></td>
<td>body opacity [default 1]</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">waves.viz.numPointsX</span></code></td>
<td>wave plane discretization: number of X points [default 50]</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">waves.viz.numPointsY</span></code></td>
<td>wave plane discretization: number of Y points [default 50]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="outputs-and-opening-in-paraview">
<h3>Outputs and Opening in Paraview<a class="headerlink" href="#outputs-and-opening-in-paraview" title="Permalink to this headline">¶</a></h3>
<p>When <code class="docutils literal"><span class="pre">simu.paraview</span></code> is set to 1 a directory called <code class="docutils literal"><span class="pre">vtk</span></code> is created.
All files necessary for Paraview vizualisation are located there.
To view in Paraview:</p>
<ul class="simple">
<li>Open the <code class="docutils literal"><span class="pre">vtk/filename.pvd</span></code> file in Paraview</li>
<li>Click <code class="docutils literal"><span class="pre">Apply</span></code></li>
<li>With the model selected in the pipeline, run the <code class="docutils literal"><span class="pre">WEC-Sim</span></code> macro</li>
<li>Move the camera to desired view</li>
<li>Click the green arrow (play) button</li>
</ul>
<p>The WEC-Sim macro:</p>
<ul class="simple">
<li>Extracts each body, sets the color and opacity, and renames them</li>
<li>Extracts the waves, sets color and opacity, and renames</li>
<li>Creates the ground plane</li>
<li>Sets the camera to <code class="docutils literal"><span class="pre">parallel</span> <span class="pre">view</span></code></li>
</ul>
</div>
<div class="section" id="basic-visualization-manipulation">
<h3>Basic Visualization Manipulation<a class="headerlink" href="#basic-visualization-manipulation" title="Permalink to this headline">¶</a></h3>
<p>After opening the <code class="docutils literal"><span class="pre">.pvd</span></code> file and running the <code class="docutils literal"><span class="pre">WEC-Sim</span></code> macro you can do a number of things to visualize the simulation in different ways.
You can color waves and bodies by any of the available properties and apply any of the Paraview filters.</p>
<p>The video below shows three different views of the OSWEC model described in the tutorials.
On the bottom right view the wave elevation is used to color the free surface. The top right view uses the <code class="docutils literal"><span class="pre">slice</span></code> filter.</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/KcsLi38Xjv0" frameborder="0" allowfullscreen></iframe></div>
<div class="section" id="visualizing-non-linear-hydro-forces">
<h3>Visualizing Non-Linear Hydro Forces<a class="headerlink" href="#visualizing-non-linear-hydro-forces" title="Permalink to this headline">¶</a></h3>
<p>When using non-linear hydro the paraview files also contain cell data for the bodies.
The cell data are:</p>
<ul class="simple">
<li>Cell areas</li>
<li>Hydrostatic pressures</li>
<li>Linear Froude-Krylov pressures</li>
<li>Non-linear Froude-Krylov pressures</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">pressureGlyphs</span></code> macro calculates cell normals, and cell centers. It then creates the following glyphs:</p>
<ul class="simple">
<li>Hydrostatic Pressure</li>
<li>Linear Froude-Krylov pressure</li>
<li>Non-linear Froude-Krylov pressure</li>
<li>Total pressure (hydostatic plus non-linear Foude-Krylov)</li>
<li>Froude-Krylov delta (non-linear minus linear)</li>
</ul>
<p>The video below shows three different views of the RM3 model described in the turoeials.
The top right shows glyphs of the non-linear Froude-Krylov pressure acting on the float.
The bottom right shows the float colored by hydrostatic pressure.</p>
<blockquote>
<div><iframe width="420" height="315" src="https://www.youtube.com/embed/VIPXsS8h9pg" frameborder="0" allowfullscreen></iframe></div></blockquote>
</div>
</div>
<div class="section" id="pto-sim">
<span id="ptosim"></span><h2>PTO-Sim<a class="headerlink" href="#pto-sim" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rm3-with-pto-sim">
<span id="id1"></span><h3>RM3 with PTO-Sim<a class="headerlink" href="#rm3-with-pto-sim" title="Permalink to this headline">¶</a></h3>
<p>This section describes how to use RM3 with PTO-Sim, the WEC-Sim module responsible for accurately modeling a WEC&#8217;s conversion of mechanical power to electrical power. While the PTO used in the WEC-Sim example above is modeled as a simple linear damper, PTO-Sim is capable of modeling many power conversion chains (PCC) such as mechanical drivetrain and hydraulic drivetrain. PTO-Sim is made of native Simulink blocks coupled with WEC-Sim, using WEC-Sim&#8217;s user-defined PTO blocks, where the WEC-Sim response (relative displacement and velocity for linear motion and angular position and velocity for rotary motion) is the PTO-Sim input. Similarly, the PTO force or torque is the WEC-Sim input. For more information on how PTO-Sim works, refer to <a class="reference internal" href="tutorials.html#so-development-2015" id="id2">[1]</a>.</p>
<p>Two tutorials will be given in this section, one for the RM3 with a hydraulic PTO, and another for the RM3 with a mechanical PTO.</p>
<div class="section" id="rm3-with-hydraulic-pto">
<h4>RM3 with Hydraulic PTO<a class="headerlink" href="#rm3-with-hydraulic-pto" title="Permalink to this headline">¶</a></h4>
<p>The hydraulic PTO example used in this section consists of a piston, a rectifying valve, a high pressure accumulator, a hydraulic motor coupled to a rotary generator, and a low pressure accumulator.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/HYDPHYMODEL.PNG"><img alt="_images/HYDPHYMODEL.PNG" src="_images/HYDPHYMODEL.PNG" style="width: 400pt;" /></a>
</div>
<p>There are two ways of modeling the hydraulic PTO: with a compressible fluid hydraulic, and with a non-compressible fluid hydraulic. The compressible fluid model uses the properties of fluid such as an effective bulk modulus and density while the non-compressible fluid does not.</p>
<div class="section" id="modeling-rm3-with-hydraulic-pto">
<h5>Modeling RM3 with Hydraulic PTO<a class="headerlink" href="#modeling-rm3-with-hydraulic-pto" title="Permalink to this headline">¶</a></h5>
<p>In this section, a step by step tutorial on how to set up and run the RM3 simulation with PTO-Sim is provided. All the files used in WEC-Sim will remain the same. An additional file that is needed is the PTO-Sim input file (<code class="docutils literal"><span class="pre">ptoSimInputFile.m</span></code>). If the rotary generator lookup table is used, a datasheet that contains generator efficiency, torque, and angular velocity is needed and should be named as <code class="docutils literal"><span class="pre">table</span></code> in Workspace (<code class="docutils literal"><span class="pre">table.eff</span></code>, <code class="docutils literal"><span class="pre">table.Tpu</span></code>,and <code class="docutils literal"><span class="pre">table.omegapu</span></code>). More details, refer to <a class="reference internal" href="#step-8">Step 8</a>. In summary, the files need to run RM3 with PTO-Sim case are the following:</p>
<ul class="simple">
<li>WEC-Sim input file: <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code> (make sure to set the PTO linear damping to zero)</li>
<li>Simulink model: <code class="docutils literal"><span class="pre">RM3.slx</span></code></li>
<li>Geometry file for each body: <code class="docutils literal"><span class="pre">float.stl</span></code> and <code class="docutils literal"><span class="pre">plate.stl</span></code></li>
<li>Hydrodynamic data file(s): <code class="docutils literal"><span class="pre">rm3.h5</span></code></li>
<li>Optional user defined postprocessing file: <code class="docutils literal"><span class="pre">userDefinedFunction.m</span></code></li>
<li>PTO-Sim input file: <code class="docutils literal"><span class="pre">ptoSimInputFile.m</span></code></li>
<li>Datasheet for the rotary generator: <code class="docutils literal"><span class="pre">table</span></code> (<code class="docutils literal"><span class="pre">table.eff</span></code>, <code class="docutils literal"><span class="pre">table.Tpu</span></code>,and <code class="docutils literal"><span class="pre">table.omegapu</span></code>)</li>
</ul>
</div>
<div class="section" id="simulink-model">
<h5>Simulink Model<a class="headerlink" href="#simulink-model" title="Permalink to this headline">¶</a></h5>
<p>The Simulink model can be built as following:</p>
<ul class="simple">
<li>Step 1: User can get started from RM3 example.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/COPYRM3.PNG"><img alt="_images/COPYRM3.PNG" src="_images/COPYRM3.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 2: Open <code class="docutils literal"><span class="pre">RM3.slx</span></code> file and replace Translational PTO (local Z) with Translational PTO UD Force (Local Z).</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/TRANSLATIONALPTOUD.PNG"><img alt="_images/TRANSLATIONALPTOUD.PNG" src="_images/TRANSLATIONALPTOUD.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 3: Use a subsystem and rename it to PTO-Sim where input is response and output is force.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/RM3WITHPTOSIMBLOCK.PNG"><img alt="_images/RM3WITHPTOSIMBLOCK.PNG" src="_images/RM3WITHPTOSIMBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 4: Go inside PTO-Sim block and add one bus selector and two selector blocks. Since PTO-Sim block is connected to the WEC-Sim translational joint block, you can select position and velocity and therefore &lt;signal1&gt; and &lt;signal2&gt; will change to &lt;position&gt; and &lt;velocity&gt;. Because the heave motion is driving the piston, selection index of each selector needs to be changed to 3.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/SELECTORS.PNG"><img alt="_images/SELECTORS.PNG" src="_images/SELECTORS.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 5: Go to Simulink Library Browser to access PTO-Sim Library.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OPENPTOSIMLIB.PNG"><img alt="_images/OPENPTOSIMLIB.PNG" src="_images/OPENPTOSIMLIB.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 6: By looking at the physical hydraulic PTO model as shown above, user can simply drag and drop PTO-Sim library blocks. Piston, valves, accummulator blocks are located under Hydraulic block. Rotary generator lookup table is under Generator block.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB.PNG"><img alt="_images/USEPTOSIMLIB.PNG" src="_images/USEPTOSIMLIB.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 7: Since two accumulators are needed for the high pressure accumulator and low pressure accumulator, user need to douple-click on each block and give a number to each accumulator. For example, <code class="docutils literal"><span class="pre">ptosim.accumulator(1)</span></code> is called high pressure accumulator and <code class="docutils literal"><span class="pre">ptosim.accumulator(2)</span></code> is called low pressure accumulator.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/MULTIPLEACCUMULATORS.PNG"><img alt="_images/MULTIPLEACCUMULATORS.PNG" src="_images/MULTIPLEACCUMULATORS.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple" id="step-8">
<li>Step 8: If a rotary generator lookup table is used, this block assumes user will provide the datasheet. After the datasheet is loaded into <code class="docutils literal"><span class="pre">Workspace</span></code>, it needs to be named as <code class="docutils literal"><span class="pre">table</span></code> because the word <code class="docutils literal"><span class="pre">table</span></code> is used inside Simulink lookup table block. The datasheet in tutorials is taken from ABB datasheet part number M3BJ315SMC. The lookup table takes three inputs: efficiency (<code class="docutils literal"><span class="pre">table.eff</span></code>), anglular velocity (<code class="docutils literal"><span class="pre">table.Tpu</span></code>), and generator torque (<code class="docutils literal"><span class="pre">table.omegapu</span></code>), respectively.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/ROTARYHIGHLEVELBLOCK.PNG"><img alt="_images/ROTARYHIGHLEVELBLOCK.PNG" src="_images/ROTARYHIGHLEVELBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/ROTARYBLOCK.PNG"><img alt="_images/ROTARYBLOCK.PNG" src="_images/ROTARYBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/ROTARYGENLOOKUPTABLE.PNG"><img alt="_images/ROTARYGENLOOKUPTABLE.PNG" src="_images/ROTARYGENLOOKUPTABLE.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 9: After the high pressure and low pressure accumulators have been identified, and the rotary generator lookup table datasheet has been setup, all the blocks can be connected together.</li>
</ul>
<p>Position and velocity from selectors are used as inputs of compressible fluid piston. This block also needs to know top and bottom volumetric flows which come from the rectifying check valve. The piston then outputs PTO force that will be used by WEC-Sim. Two other outputs are the piston pressures. Rectifying check valve takes both the pressures from the piston and accumulators. Both high and low pressure accumulators takes the volumetric flows from the rectifying check valve and hydraulic motor. Hydraulic motor uses the knowledge of the pressures from both accumulator and generator torque from the rotary generator. The rotary generator needs angular velocity from the hydraulic motor. Figure below shows how to connect all the blocks together.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/HYDPTOSIM.PNG"><img alt="_images/HYDPTOSIM.PNG" src="_images/HYDPTOSIM.PNG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="input-file">
<h5>Input File<a class="headerlink" href="#input-file" title="Permalink to this headline">¶</a></h5>
<p>In this section, PTO-Sim input file (<code class="docutils literal"><span class="pre">ptoSimInputFile.m</span></code>) is defined and categorized into sections such as piston, rectifying check valve, high pressure accumulator, hydraulic motor, low pressure accumulator, and rotary generator.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/PTOSIMINPUTFILE.PNG"><img alt="_images/PTOSIMINPUTFILE.PNG" src="_images/PTOSIMINPUTFILE.PNG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="simulation-and-postprocessing">
<h5>Simulation and Postprocessing<a class="headerlink" href="#simulation-and-postprocessing" title="Permalink to this headline">¶</a></h5>
<p>Simulation and postprocessing are the same process as described in WEC-Sim <a href="#id7"><span class="problematic" id="id8">Simulation_</span></a> example above.</p>
</div>
</div>
<div class="section" id="rm3-with-mechanical-pto">
<h4>RM3 with Mechanical PTO<a class="headerlink" href="#rm3-with-mechanical-pto" title="Permalink to this headline">¶</a></h4>
<p>A mehchanical PTO is used in this example is modeled as a direct drive linear generator. The main components of this example consist of magnets and coil where the magnet assembly is attached to the heaving float and the coil is locacted inside the spar. As the float moves up and down, the magnet assembly creates a change in magnetic field surrond the spar that contains the coil. Therefore, current is induced in the coil and electricity is generated.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/MECHANICALPTO.PNG"><img alt="_images/MECHANICALPTO.PNG" src="_images/MECHANICALPTO.PNG" style="width: 400pt;" /></a>
</div>
<div class="section" id="id3">
<h5>Simulink Model<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h5>
<p>Step 1 through 3 are the same as in <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
<ul class="simple">
<li>Step 4: Go inside PTO-Sim block and add one bus selector and one selector blocks. Only velocity is needed for this example.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/SELECTORS2.PNG"><img alt="_images/SELECTORS2.PNG" src="_images/SELECTORS2.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 5: Go to PTO-Sim library.</li>
<li>Step 6: By looking at the physical mechanical PTO model as shown above, user can simply drag and drop PTO-Sim library blocks. In this case, only the direct drive linear generator is needed and it is located under generator box.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB2.PNG"><img alt="_images/USEPTOSIMLIB2.PNG" src="_images/USEPTOSIMLIB2.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 7: Simply connect velocity from the selector to the input of the direct drive linear generator. The ouput PTO force is fed back to WEC-Sim.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/DDLINEARGENPTOSIM.PNG"><img alt="_images/DDLINEARGENPTOSIM.PNG" src="_images/DDLINEARGENPTOSIM.PNG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="input-file-simulation-and-postprocessing">
<h5>Input File, Simulation, and Postprocessing<a class="headerlink" href="#input-file-simulation-and-postprocessing" title="Permalink to this headline">¶</a></h5>
<p>The same as <a class="reference internal" href="#rm3-with-pto-sim">RM3 with PTO-Sim</a>.</p>
</div>
</div>
</div>
<div class="section" id="oswec-with-pto-sim">
<h3>OSWEC with PTO-Sim<a class="headerlink" href="#oswec-with-pto-sim" title="Permalink to this headline">¶</a></h3>
<p>This section describes how to use OSWEC with PTO-Sim. The same process as described in <a class="reference internal" href="#rm3-with-pto-sim">RM3 with PTO-Sim</a>. However, since OSWEC is a rotary device, it takes torque as an input and a rotary to linear motion conversion block is needed.</p>
<div class="section" id="oswec-with-hydraulic-pto">
<h4>OSWEC with Hydraulic PTO<a class="headerlink" href="#oswec-with-hydraulic-pto" title="Permalink to this headline">¶</a></h4>
<p>A hydraulic PTO or mechanical PTO can be used with OSWEC but for simplicity a hydraulic PTO will be used as an example.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWECPHYMODEL.PNG"><img alt="_images/OSWECPHYMODEL.PNG" src="_images/OSWECPHYMODEL.PNG" style="width: 400pt;" /></a>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/MoTIONMECHANISM.PNG"><img alt="_images/MoTIONMECHANISM.PNG" src="_images/MoTIONMECHANISM.PNG" style="width: 400pt;" /></a>
</div>
<div class="section" id="modeling-of-oswec-with-hydraulic-pto">
<h5>Modeling of OSWEC with Hydraulic PTO<a class="headerlink" href="#modeling-of-oswec-with-hydraulic-pto" title="Permalink to this headline">¶</a></h5>
<p>The same as <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
</div>
<div class="section" id="id4">
<h5>Simulink Model<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h5>
<p>The Simulink model can be built as following:</p>
<ul class="simple">
<li>Step 1: Copy OSWEC tutorial folder to get started.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/COPYOSWEC.PNG"><img alt="_images/COPYOSWEC.PNG" src="_images/COPYOSWEC.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 2: Open <code class="docutils literal"><span class="pre">OSWEC.slx</span></code> file and replace Rotary PTO (Local RY) with Rotational PTO UD Torque (Local RY).</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWECWITHPTOSIMBLOCK.PNG"><img alt="_images/OSWECWITHPTOSIMBLOCK.PNG" src="_images/OSWECWITHPTOSIMBLOCK.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 3: Use a subsystem and rename it to PTO-Sim where input is response and output is torque.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/OSWECWITHPTOSIMBLOCK1.PNG"><img alt="_images/OSWECWITHPTOSIMBLOCK1.PNG" src="_images/OSWECWITHPTOSIMBLOCK1.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 4: Go inside PTO-Sim block and drag and drop one bus selector and two selector blocks. Since pitch is driving the piston, selection index of each selector needs to be changed to 5. Next, go to PTO-Sim library and drag and drop all the blocks for the hydraulic PTO. The rotary to linear adjustable rod block can be found under rotary to linear conversion box.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/USEPTOSIMLIB3.PNG"><img alt="_images/USEPTOSIMLIB3.PNG" src="_images/USEPTOSIMLIB3.PNG" style="width: 400pt;" /></a>
</div>
<ul class="simple">
<li>Step 5: The rotary to linear adjustable rod block takes angular position and velocity from index slector blocks and PTO force from compressible fluid piston block. The outputs of the rotary to linear adjustable rod block are linear position, velocity, and torque. Linear position and velocity are used as inputs for compressible fluid piston and torque is fed back to WEC-Sim. The rest of the connects are the same as in RM3 with hydraulic PTO. User is encouraged to go up one level to check the connections between PTO-Sim and WEC-Sim.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/HYDPTOSIMOSWEC.PNG"><img alt="_images/HYDPTOSIMOSWEC.PNG" src="_images/HYDPTOSIMOSWEC.PNG" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="id5">
<h5>Input File, Simulation, and Postprocessing<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h5>
<p>The same as <a class="reference internal" href="#rm3-with-hydraulic-pto">RM3 with hydraulic PTO</a>.</p>
</div>
</div>
</div>
<div class="section" id="other-pto-sim-tutorials">
<h3>Other PTO-Sim Tutorials<a class="headerlink" href="#other-pto-sim-tutorials" title="Permalink to this headline">¶</a></h3>
<p>Other PTO-Sim tuturails that were not discussed above are located under tutorials/PTO-Sim_Tutorials.</p>
<table border="1" class="docutils">
<colgroup>
<col width="62%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">PTO-Sim Tutorials</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PTO Types</td>
<td>Folder Names</td>
</tr>
<tr class="row-odd"><td>RM3 with non-compressible fluid hydraulic</td>
<td>RM3_w_NCF_Hydraulic_PTO</td>
</tr>
<tr class="row-even"><td>RM3 with compressible fluid hydraulic</td>
<td>RM3_w_CF_Hydraulic_PTO</td>
</tr>
<tr class="row-odd"><td>RM3 with direct drive linear generator</td>
<td>RM3_w_Mechanical_PTO</td>
</tr>
<tr class="row-even"><td>OSWEC with non-compressible fluid hydraulic (adjustable rod)</td>
<td>OSWEC_w_NCF_Hydraulic_PTO</td>
</tr>
<tr class="row-odd"><td>OSWEC with compressible fluid hydraulic (adjustable rod)</td>
<td>OSWEC_w_CF_Hydraulic_PTO</td>
</tr>
<tr class="row-even"><td>OSWEC with direct drive linear generator (adjustable rod)</td>
<td>OSWEC_w_Mechanical_PTO</td>
</tr>
<tr class="row-odd"><td>OSWEC with non-compressible fluid hydraulic (crank)</td>
<td>OSWEC1_w_NCF_Hydraulic_PTO</td>
</tr>
<tr class="row-even"><td>OSWEC with compressible fluid hydraulic (crank)</td>
<td>OSWEC1_w_CF_Hydraulic_PTO</td>
</tr>
<tr class="row-odd"><td>OSWEC with direct drive linear generator (crank)</td>
<td>OSWEC1_w_Mechanical_PTO</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="moordyn">
<span id="id6"></span><h2>MoorDyn<a class="headerlink" href="#moordyn" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Coming soon!</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="online_forum.html" class="btn btn-neutral float-right" title="Online Forum" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tutorials.html" class="btn btn-neutral" title="Tutorials" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, National Renewable Energy Laboratory and Sandia Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>