

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; WEC-Sim 1.1a0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="WEC-Sim 1.1a0 documentation" href="index.html"/>
        <link rel="next" title="Code Structure" href="code_structure.html"/>
        <link rel="prev" title="Theory" href="theory.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> WEC-Sim</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#downloading-and-installing-wec-sim">Downloading and Installing WEC-Sim</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-wec-sim">Running WEC-Sim</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="code_structure.html">Code Structure</a><ul>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#code-conventions">Code Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#input-file-structure">Input File Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#input-parameters">Input Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="code_structure.html#library-structure">Library Structure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="applications.html">Applications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="applications.html#rm3-two-body-point-absorber">RM3 Two-Body Point Absorber</a></li>
<li class="toctree-l2"><a class="reference internal" href="applications.html#oscillating-surge-pitch-device">Oscillating Surge-Pitch Device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="trouble_shooting.html">Trouble Shooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="trouble_shooting.html#tips">Tips</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">WEC-Sim</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/getting_started.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>The WEC-Sim source code is written in <a class="reference external" href="http://www.mathworks.com/products/matlab/">MATLAB</a>, and the BEM preprocessors are written in Python. Running the WEC-Sim code requires users to install MATLAB, the MATLAB toolboxes listed in the Table below, Python, and the WEC-Sim source code. WEC-Sim was developed in MATLAB R2014b; this is the version of MATLAB that is supported by WEC-Sim.</p>
<p>The latest version of WEC-Sim uses a new hydrodynamic data format that allows users to input data from WAMIT, NEMOH, and AQWA. In order to write this data file, the user needs to install <a class="reference external" href="https://github.com/WEC-Sim/bemio">bemio</a>, use the code to read hydrodynamic simulation output files (e.g. WAMIT .out files), and output the data to the bemio data format.</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Matlab Package</strong></td>
<td><strong>Recommended Version</strong></td>
</tr>
<tr class="row-even"><td>MATLAB</td>
<td>R2014b Version 8.4</td>
</tr>
<tr class="row-odd"><td>Simulink</td>
<td>R2014b Version 8.4</td>
</tr>
<tr class="row-even"><td>SimMechanics</td>
<td>R2014b Version 4.5</td>
</tr>
<tr class="row-odd"><td>Simscape</td>
<td>R2014b Version 3.12</td>
</tr>
</tbody>
</table>
<div class="section" id="downloading-and-installing-wec-sim">
<h2>Downloading and Installing WEC-Sim<a class="headerlink" href="#downloading-and-installing-wec-sim" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-install-matlab">
<h3>Step 1: Install MATLAB<a class="headerlink" href="#step-1-install-matlab" title="Permalink to this headline">¶</a></h3>
<p>Install MATLAB and the additional toolboxes listed in the table above. To ensure that all of the required toolboxes installed, type the <code class="docutils literal"><span class="pre">ver</span></code> command in the <a class="reference external" href="http://www.mathworks.com/help/matlab/matlab_env/enter-statements-in-command-window.html">MATLAB Command Window</a>. Consult the <a class="reference external" href="http://www.mathworks.com">MathWorks website</a> for more information on performing this step.</p>
</div>
<div class="section" id="step-2-download-wec-sim">
<h3>Step 2: Download WEC-Sim<a class="headerlink" href="#step-2-download-wec-sim" title="Permalink to this headline">¶</a></h3>
<p>Download the WEC-Sim source code from the <a class="reference external" href="https://github.com/WEC-Sim/WEC-Sim/releases">WEC-Sim GitHub repository</a>.</p>
</div>
<div class="section" id="step-3-add-wec-sim-source-code-to-matlab-path">
<h3>Step 3: Add WEC-Sim Source Code to MATLAB Path<a class="headerlink" href="#step-3-add-wec-sim-source-code-to-matlab-path" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal"><span class="pre">wecSimStartup.m</span></code> file (located in top level WEC-Sim folder). Copy the code in the <code class="docutils literal"><span class="pre">wecSimStartup.m</span></code> file and paste it into the startup.m file within the <a class="reference external" href="http://www.mathworks.com/help/matlab/matlab_env/matlab-startup-folder.html">MATLAB Startup Folder</a>. Set the <code class="docutils literal"><span class="pre">wecSimPath</span></code> variable to the location of the <code class="docutils literal"><span class="pre">WEC-Sim</span></code> folder on your local machine. To verify the new path, close and reopen MATLAB, and type the <code class="docutils literal"><span class="pre">path</span></code> command in the [<a class="reference external" href="http://www.mathworks.com/help/matlab/matlab_env/enter-statements-in-command-window.html">http://www.mathworks.com/help/matlab/matlab_env/enter-statements-in-command-window.html</a> MATLAB Command Window] to ensure that the WEC-Sim directory is listed in the <a class="reference external" href="http://www.mathworks.com/help/matlab/search-path.html">MATLAB Search Path</a>.</p>
</div>
<div class="section" id="step-4-add-wec-sim-library-to-simulink-library">
<h3>Step 4: Add WEC-Sim Library to Simulink Library<a class="headerlink" href="#step-4-add-wec-sim-library-to-simulink-library" title="Permalink to this headline">¶</a></h3>
<p>Open the Simulink Library Browser by typing <code class="docutils literal"><span class="pre">simulink</span></code> from the <a class="reference external" href="http://www.mathworks.com/help/matlab/matlab_env/enter-statements-in-command-window.html">MATLAB Command Window</a>. Once the Simulink Library Browser opens, <a class="reference external" href="http://www.mathworks.com/help/simulink/gui/use-the-library-browser.html?searchHighlight=simulink%20Refresh%20the%20Library%20Browser">Refresh the Simulink Library</a>. The WEC-Sim Library of Body Elements, Constraints, Frames and PTOs should now be visible (as shown below). The WEC-Sim library should now be accessible every time Simulink is opened. For more information on using and modifying library blocks refer to the <a class="reference external" href="http://www.mathworks.com/help/simulink/">Simulink Documentation</a>.</p>
</div>
</div>
<div class="section" id="running-wec-sim">
<h2>Running WEC-Sim<a class="headerlink" href="#running-wec-sim" title="Permalink to this headline">¶</a></h2>
<p>This section gives an overview of the WEC-Sim work flow and how to run WEC-Sim. Here we describe the file structure of the WEC-Sim runs and the steps for setting up and running a WEC-Sim simulation. Detailed descriptions and options for input parameters for the input file are described in the Code Overview Section. Specific examples of using WEC-Sim to simulate WEC devices are presented in the Application Section.</p>
<div class="section" id="file-structure-overview">
<h3>File Structure Overview<a class="headerlink" href="#file-structure-overview" title="Permalink to this headline">¶</a></h3>
<p>Table below shows the default file structure for WEC-Sim. All the necessary files for running WEC-Sim are located within a user defined folder, referred to herein as the WEC-Sim case folder or case directory.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="46%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Input file</td>
<td>wecSimInputFile.m</td>
<td>Case directory</td>
</tr>
<tr class="row-even"><td>WEC Model</td>
<td><code class="docutils literal"><span class="pre">&lt;WEC</span> <span class="pre">Model</span> <span class="pre">Name&gt;.slx</span></code></td>
<td>Case directory</td>
</tr>
<tr class="row-odd"><td>Hydrodynamic Data</td>
<td><code class="docutils literal"><span class="pre">&lt;hydro-data</span> <span class="pre">name&gt;.hd5</span></code></td>
<td>hydroData</td>
</tr>
<tr class="row-even"><td>Geometry</td>
<td><code class="docutils literal"><span class="pre">&lt;STL</span> <span class="pre">File</span> <span class="pre">Name&gt;.stl</span></code></td>
<td>geometry</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="steps-to-run-wec-sim">
<h3>Steps To Run WEC-Sim<a class="headerlink" href="#steps-to-run-wec-sim" title="Permalink to this headline">¶</a></h3>
<p>The overview of the WEC-Sim work flow is shown in the figure below. We describe the steps for setting up and running a WEC-Sim simulations in the following:</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/WECSimWorkflow.jpg"><img alt="_images/WECSimWorkflow.jpg" src="_images/WECSimWorkflow.jpg" style="width: 400pt;" /></a>
</div>
<div class="section" id="step-1-pre-processing">
<h4>Step 1: Pre-Processing<a class="headerlink" href="#step-1-pre-processing" title="Permalink to this headline">¶</a></h4>
<p>In the pre-processing step, users need to create the model geometry, calculate the hydrodynamic coefficients and convert the hydrodynamic coefficients into HDF5 format for WEC-Sim read:</p>
<ul class="simple">
<li>Creating the device geometry using a CAD model: Users need to create representations of the WEC bodies to generate mesh for their hydrodynamic model and also need to export a their CAD model in STL format, which are used to visualize the WEC bodies in the WEC-Sim/MATLAB graphical user interface.</li>
<li>Run the hydrodynamic model: WEC-Sim require pre-determined hydrodynamic coefficients. Typically, these hydrodynamic coefficients for each body of the WEC device are generated using a hydrodynamic model (e.g., WAMIT, NEMOH or AQWA).</li>
<li>Run <code class="docutils literal"><span class="pre">bemio</span></code> to create WEC-Sim input hydrodynamic data file in HDF5 format: WEC-Sim will read the hydrodynamic data generated using a hydrodynamic model in HDF5 format (<code class="docutils literal"><span class="pre">&lt;hydro-data</span> <span class="pre">name&gt;.hd5</span></code>). The boundary-element method input/output (<code class="docutils literal"><span class="pre">bemio</span></code>) was developed for this purpose. Currently, bemio accepts the hydrodynamic coefficients from WAMIT, NEMOH and AQWA.</li>
</ul>
<p>Note:
* To ensure that WEC-Sim uses the correct hydrodynamic coefficients to model the WEC system, the hydrodynamic coefficients MUST be given at the center of gravity for each body. If WAMIT is used, the center of gravity for each body MUST be at the origin of the body coordinate system (XBODY) in WAMIT simulations. More details on WAMIT setup are given in the WAMIT User Manual&lt;ref&gt;wamit&lt;/ref&gt;.
* Current version of WEC-Sim does not account for the multidirectional wave heading and WEC-Sim will use whatever (single) wave heading was modeled in the hydrodynamic model.
* Users are also allowed to specify their own hydrodynamic coefficients by modifying an existing HDF5 file or create their own HDF5 file with customized hydrodynamic coefficients following HDF5 format used in <code class="docutils literal"><span class="pre">bemio</span></code>.</p>
</div>
<div class="section" id="step-2-build-device-simulink-simmechanics-model">
<h4>Step 2: Build Device Simulink/SimMechanics Model<a class="headerlink" href="#step-2-build-device-simulink-simmechanics-model" title="Permalink to this headline">¶</a></h4>
<p>Next, the user must build the device model using the Simulink/SimMechanics toolboxes and the WEC-Sim Library. Figure below shows an example of a a two-body point absorber modeled in Simulink/SimMechanics.</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/exampleWecModel.png"><img alt="_images/exampleWecModel.png" src="_images/exampleWecModel.png" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-3-create-wec-sim-input-file">
<h4>Step 3: Create WEC-Sim Input File<a class="headerlink" href="#step-3-create-wec-sim-input-file" title="Permalink to this headline">¶</a></h4>
<p>A WEC-Sim input file needs to be created in the case directory, and it MUST be named <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code>. An example of the input file for a two-body point absorber is shown in the following figure. In the input file, the simulation settings, sea state, body mass properties, PTO, and constraints are specified. In addition, users MUST specify the Simulink/SimMechanics model file name in the <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code>, which is:</p>
<div class="highlight-python"><div class="highlight"><pre>simu.simMechanicsFile=’&lt;WEC Model Name&gt;.slx’.
</pre></div>
</div>
<div class="figure">
<a class="reference internal image-reference" href="_images/runWECSim_mod.png"><img alt="_images/runWECSim_mod.png" src="_images/runWECSim_mod.png" style="width: 400pt;" /></a>
</div>
</div>
<div class="section" id="step-4-execute-wec-sim">
<h4>Step 4: Execute WEC-Sim<a class="headerlink" href="#step-4-execute-wec-sim" title="Permalink to this headline">¶</a></h4>
<p>Finally, execute the simulation by running the wecSim command from the MATLAB Command Window. The wecSim command must be executed in the WEC-Sim case directory where the <code class="docutils literal"><span class="pre">wecSimInputFile.m</span></code> is located.</p>
<p>Node: WEC-Sim simulations should always be executed from the MATLAB Command Window and NOT from the Simulink/SimMechanics model. This ensures that the correct variables are in the MATLAB workspace during simulation.</p>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="code_structure.html" class="btn btn-neutral float-right" title="Code Structure">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="theory.html" class="btn btn-neutral" title="Theory"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Michael Lawson, Kelley Ruehl, Yi-Hsiang Yu, Carlos Michelen.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.1a0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>